<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <title>Post Edit</title>
    <link href="/css/header.css" rel="stylesheet">
    <link href="/css/post-edit.css" rel="stylesheet">

    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
</head>
<body>
<th:block th:insert="common/header"></th:block>
<div class="container">
    <h1>投稿編集画面</h1><br>
    <form th:action="@{/posts/edit/__${postForm.id}__}" method="post" enctype="multipart/form-data" th:object="${postForm}">
        <div class="left-section">
            <label>画像：</label>
            <div class="image-carousel">
                <div class="form-group">
                    <div class="image-inputs">
                        <div class="image">
                            <input type="file" th:field="*{imageFile1}" class="input-file" name="input1" id="input1" accept="image/*">
                            <label for="input1"><img class="input-image" th:src="*{imageFile1}" alt="画像1" id="figureImage1"></label>
                        </div>
                        <div class="image">
                            <input type="file" th:field="*{imageFile2}" class="input-file" name="input2" id="input2" accept="image/*">
                            <label for="input2"><img class="input-image" th:src="*{imageFile2}" alt="画像2" id="figureImage2"></label>
                        </div>
                        <div class="image">
                            <input type="file" th:field="*{imageFile3}" class="input-file" name="input3" id="input3" accept="image/*">
                            <label for="input3"><img class="input-image" th:src="*{imageFile3}" alt="画像3" id="figureImage3"></label>
                        </div>
                        <div class="image">
                            <input type="file" th:field="*{imageFile4}" class="input-file" name="input4" id="input4" accept="image/*">
                            <label for="input4"><img class="input-image" th:src="*{imageFile4}" alt="画像4" id="figureImage4"></label>
                        </div>
                        <div class="image">
                            <input type="file" th:field="*{imageFile5}" class="input-file" name="input5" id="input5" accept="image/*">
                            <label for="input5"><img class="input-image" th:src="*{imageFile5}" alt="画像5" id="figureImage5"></label>
                        </div>
                    </div>
                </div>
            </div>
            <div id="map"></div>
            <div class="form-group">
                <label for="address">住所：</label>
                <span class="error" th:each="error: ${#fields.errors('address')}">
                  [[ ${error} ]]
                </span>
                <input type="text" id="address" th:field="*{address}" class="form-control">
            </div>
            <ul>
                <li hidden>緯度:<input id="lat" type="text" th:field="*{map_longitude}"></li>
                <li hidden>経度:<input id="lng" type="text" th:field="*{map_latitude}"></li>
            </ul>
        </div>
        <div class="right-section">
            <div class="form-group">
                <label for="title">タイトル：</label>
                <span class="error" th:each="error: ${#fields.errors('title')}">
                  [[ ${error} ]]
                </span>
                <input type="text" id="title" th:field="*{title}" class="form-control">
            </div>
            <div class="form-group">
                <label for="category">カテゴリ：</label>
                <span class="error" th:each="error: ${#fields.errors('categories')}">
                  [[ ${error} ]]
                </span>
                <select id="category" th:field="*{categories.id}" name="categoryId" class="form-control">
                    <option th:unless="${category.id} eq 0" th:each="category : ${categories}" th:value="${category.id}" th:text="${category.name}"></option>
                </select>
            </div>
            <div class="form-group">
                <label for="summary">概要：</label>
                <span class="error" th:each="error: ${#fields.errors('summary')}">
                  [[ ${error} ]]
                </span>
                <input type="text" id="summary" th:field="*{summary}" class="form-control">
            </div>
            <div class="form-group">
                <label for="detail">詳細：</label>
                <span class="error" th:each="error: ${#fields.errors('detail')}">
                  [[ ${error} ]]
                </span>
                <textarea id="detail" th:field="*{detail}" class="form-control"></textarea>
            </div>
            <div class="form-group">
                <label for="city">市町村：</label>
                <span class="error" th:each="error: ${#fields.errors('cities')}">
                  [[ ${error} ]]
                </span>
                <select id="city" th:field="*{cities.id}" name="citiesId" class="form-control">
                    <option th:unless="${city.id} eq 0" th:each="city:${cities}" th:value="${city.id}" th:text="${city.name}"></option>
                </select>
            </div>
            <div class="form-group">
                <label for="link">外部リンク：</label>
                <span class="error" th:each="error: ${#fields.errors('link')}">
                  [[ ${error} ]]
                </span>
                <input type="text" id="link" th:field="*{link}" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">更新</button>
        </div>
    </form>
</div>
<script src="/js/main.js"></script>
<script src="/js/post-edit.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBwxPEJAiFmyOh3KMR4NzYmvbDuU0YwwQ8&signed_in=true&callback=initMapEdit" async defer></script>
</body>
</html>